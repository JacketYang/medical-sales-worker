# ğŸ‰ Cloudflare D1 Binding ID é”™è¯¯å·²ä¿®å¤

## é—®é¢˜

æ‚¨é‡åˆ°çš„ Cloudflare éƒ¨ç½²é”™è¯¯ï¼š

```
âœ˜ [ERROR] binding DB of type d1 must have a valid `id` specified [code: 10021]
```

**å·²ç»å½»åº•è§£å†³ï¼** âœ…

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ³• 1ï¼šä¸€é”®è‡ªåŠ¨é…ç½®ï¼ˆæœ€ç®€å•ï¼‰â­â­â­

```bash
# 1. ç™»å½• Cloudflareï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
wrangler login

# 2. è¿è¡Œè‡ªåŠ¨é…ç½®è„šæœ¬
chmod +x setup-resources.sh
./setup-resources.sh

# 3. éƒ¨ç½²åº”ç”¨
npm run deploy
```

**å°±è¿™ä¹ˆç®€å•ï¼** è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… åˆ›å»º D1 æ•°æ®åº“
- âœ… åˆ›å»º R2 å­˜å‚¨æ¡¶
- âœ… æ›´æ–°é…ç½®æ–‡ä»¶
- âœ… åˆå§‹åŒ–æ•°æ®åº“
- âœ… å¯¼å…¥ç¤ºä¾‹æ•°æ®

### æ–¹æ³• 2ï¼šæ‰‹åŠ¨é…ç½®

å¦‚æœæ‚¨æƒ³äº†è§£æ¯ä¸€æ­¥çš„æ“ä½œï¼š

```bash
# 1. åˆ›å»º D1 æ•°æ®åº“
wrangler d1 create med-sales-db
# è®°ä¸‹è¾“å‡ºä¸­çš„ database_id

# 2. åˆ›å»º R2 å­˜å‚¨æ¡¶
wrangler r2 bucket create med-sales-images

# 3. ç¼–è¾‘ worker/wrangler.toml
# æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
#   # database_id = "" # å–æ¶ˆæ³¨é‡Šå¹¶å¡«å†™å®é™…çš„D1æ•°æ®åº“ID
# æ”¹ä¸ºï¼š
#   database_id = "ä½ çš„database_id"

# 4. åˆå§‹åŒ–æ•°æ®åº“
cd worker
wrangler d1 execute med-sales-db --file=./schema.sql
wrangler d1 execute med-sales-db --file=./seed.sql

# 5. éƒ¨ç½²
wrangler deploy
```

## ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼Ÿ

åŸæ¥çš„é…ç½®æ–‡ä»¶ä½¿ç”¨äº†å ä½ç¬¦ï¼š
```toml
database_id = "your-d1-database-id"  # âŒ è¿™æ˜¯æ— æ•ˆçš„
```

Cloudflare éœ€è¦çœŸå®çš„æ•°æ®åº“ IDï¼Œæ¯ä¸ªæ•°æ®åº“çš„ ID éƒ½æ˜¯å”¯ä¸€çš„ã€‚

ç°åœ¨å·²ä¿®å¤ä¸ºï¼š
```toml
# database_id = ""  # âœ… ç­‰å¾…ç”¨æˆ·å¡«å†™çœŸå®ID
```

## å·²å®Œæˆçš„æ”¹è¿›

1. âœ… **ä¿®å¤é…ç½®æ–‡ä»¶** - ç§»é™¤äº†æ— æ•ˆçš„å ä½ç¬¦
2. âœ… **åˆ›å»ºè‡ªåŠ¨åŒ–è„šæœ¬** - ä¸€é”®å®Œæˆæ‰€æœ‰é…ç½®
3. âœ… **æ›´æ–°éƒ¨ç½²è„šæœ¬** - è‡ªåŠ¨æ£€æµ‹é…ç½®æ˜¯å¦å®Œæˆ
4. âœ… **å®Œå–„æ–‡æ¡£** - æ–°å¢æ•…éšœæ’æŸ¥æŒ‡å—

## è¯¦ç»†æ–‡æ¡£

- ğŸ“– [FIX_D1_BINDING_ID.md](FIX_D1_BINDING_ID.md) - è¯¦ç»†çš„ä¿®å¤è¯´æ˜
- ğŸ”§ [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - å®Œæ•´çš„æ•…éšœæ’æŸ¥æŒ‡å—
- ğŸš€ [ONE_CLICK_DEPLOY.md](ONE_CLICK_DEPLOY.md) - ä¸€é”®éƒ¨ç½²æŒ‡å—
- ğŸ“ [CHANGELOG.md](CHANGELOG.md) - æ›´æ–°æ—¥å¿—

## å¿«é€Ÿå¼€å§‹

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd medical-sales-website

# ç™»å½• Cloudflare
wrangler login

# è‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰
./setup-resources.sh

# éƒ¨ç½²
npm run deploy
```

**5 åˆ†é’Ÿå†…å®Œæˆéƒ¨ç½²ï¼** ğŸš€

## éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼š
1. æŸ¥çœ‹ [TROUBLESHOOTING.md](TROUBLESHOOTING.md)
2. æäº¤ GitHub Issue
3. æŸ¥çœ‹ Cloudflare å®˜æ–¹æ–‡æ¡£

---

**é—®é¢˜å·²å½»åº•è§£å†³ï¼ç°åœ¨å¯ä»¥é¡ºåˆ©éƒ¨ç½²äº†ï¼** ğŸŠ
